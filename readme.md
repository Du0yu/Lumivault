# Lumivault - 个人媒体图书馆

一个基于 Flask 的个人媒体文件管理系统，提供优雅的图片和视频浏览体验。

## 功能特性

### 🖼️ 智能图片管理
- **智能比例识别**：自动识别图片比例（3:4、4:3、16:9、9:16）并优化显示
- **比例分组展示**：相同比例的图片自动分组，提供更整齐的浏览体验
- **图片放大预览**：支持键盘导航和触摸滑动的全屏图片查看
- **懒加载优化**：按需加载图片，提升页面加载速度

### 🎬 视频管理
- **自动缩略图生成**：自动提取视频第一帧作为封面
- **多格式支持**：支持 MP4、AVI、MOV、MKV、WebM 等常见视频格式
- **视频播放器**：内置视频播放页面，支持直接播放

### 🎨 用户体验
- **响应式设计**：完美适配桌面端和移动端
- **深色/浅色主题**：支持主题切换，保护眼睛
- **分类浏览**：按文件夹自动分类，支持图片/视频标签页切换
- **移动端优化**：专为移动设备优化的侧边菜单和触摸操作

### ⚙️ 系统管理
- **媒体库重载**：一键刷新媒体文件和清除缓存
- **服务器重启**：远程重启服务器功能
- **路径配置**：灵活的媒体根目录配置

## 安装要求

```bash
pip install flask opencv-python pillow
```

## 快速开始

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd bighouse
   ```

2. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

3. **运行应用**
   ```bash
   python app.py
   ```

4. **配置媒体路径**
   - 访问 `http://localhost:5000`
   - 点击"配置设置"
   - 输入你的媒体文件根目录路径

## 目录结构

```
bighouse/
├── app.py                 # 主应用文件
├── config.json           # 配置文件（首次运行后生成）
├── static/               # 静态资源
│   ├── css/
│   │   └── style.css     # 主样式文件
│   └── js/
│       ├── app.js        # 通用功能
│       ├── album.js      # 相册功能
│       └── config.js     # 配置页面功能
├── templates/            # HTML 模板
│   ├── home.html         # 首页
│   ├── nav.html          # 分类导航
│   ├── album.html        # 相册页面
│   ├── config.html       # 配置页面
│   └── video_player.html # 视频播放器
```
```

## 使用说明

### 媒体文件组织
建议按以下结构组织你的媒体文件：

```
媒体根目录/
├── 分类1/
│   ├── 图片1.jpg
│   ├── 图片2.png
│   └── 视频1.mp4
├── 分类2/
│   ├── 图片3.jpg
│   └── 视频2.mp4
└── ...
```

### 支持的文件格式
- **图片**：JPG, JPEG, PNG, GIF, BMP
- **视频**：MP4, AVI, MOV, MKV, WebM

### 快捷键
- **图片查看器**：
  - `←/→` 或 `A/D`：上一张/下一张
  - `Esc`：关闭查看器
  - 移动端支持左右滑动切换

## 技术栈

- **后端**：Flask (Python)
- **前端**：原生 HTML/CSS/JavaScript
- **图像处理**：OpenCV, Pillow
- **特性**：响应式设计、主题切换

## 配置选项

### 环境变量
- `FLASK_ENV`：设置为 `development` 开启调试模式
- `FLASK_PORT`：自定义端口（默认 5000）

### 配置文件 (config.json)
```json
{
  "base": "/path/to/your/media/folder"
}
```

## 开发说明

### 添加新功能
1. 后端路由添加到 `app.py`
2. 前端模板放在 `templates/` 目录
3. 样式添加到 `static/css/style.css`
4. JavaScript 功能添加到 `static/js/` 对应文件

### 自定义主题
修改 `static/css/style.css` 中的 CSS 变量：

```css
:root {
  --bg-primary: #f8fafc;
  --accent-color: #8b9dc3;
  /* 更多变量... */
}
```

## 故障排除

### 常见问题

1. **视频缩略图不显示**
   - 确保安装了 OpenCV：`pip install opencv-python`
   - 检查视频文件格式是否受支持

2. **图片不显示**
   - 检查媒体根目录路径是否正确
   - 确保图片文件格式受支持
   - 检查文件权限

3. **移动端显示异常**
   - 清除浏览器缓存
   - 检查网络连接

### 性能优化建议

- 定期清理视频缩略图缓存
- 使用 SSD 存储媒体文件以提升加载速度
- 合理组织文件夹结构，避免单个文件夹文件过多

## 许可证

MIT License

## 贡献

欢迎提交 Issue 和 Pull Request！

---

**享受你的个人媒体图书馆！** 📚✨
